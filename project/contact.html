<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Contact Us ‚Ä¢ Yosemite Road Trip Guide</title>
  <meta name="description" content="Contact the Yosemite Road Trip Guide with questions, feedback, or collaboration ideas.">
  <link rel="stylesheet" href="styles/styles.css">
</head>
<body>
  <a class="skip-link" href="#main">Skip to main content</a>

  <!-- ===== HEADER (shared) ===== -->
  <header class="site-header">
    <a class="brand" href="index.html">Yosemite Road Trip Guide</a>
    <button id="menu-btn" aria-label="Open menu" aria-expanded="false">‚ò∞</button>
    <nav id="site-nav" class="nav" aria-label="Primary">
      <a href="index.html">Home</a>
      <a href="plantrip.html">Plan Your Trip</a>
      <a href="safety.html">Safety Tips</a>
      <a href="contact.html" aria-current="page">Contact</a>
      <a href="references.html">References</a>
    </nav>
    <div class="toggles">
      <button id="theme-toggle" aria-label="Toggle theme">üåì</button>
    </div>
  </header>

  <!-- ===== HERO ===== -->
  <section class="hero container" aria-label="Contact us">
    <figure class="hero-media">
      <img src="images/yosemite-banner.jpg" alt="Banner view across Yosemite Valley">
      <figcaption class="visually-hidden">Yosemite Valley overlook</figcaption>
    </figure>
    <div class="panel">
      <h1>Contact Us</h1>
      <p>If you have questions, feedback, or collaboration ideas, reach out using the form below.</p>
    </div>
  </section>

  <!-- ===== MAIN ===== -->
  <main id="main" class="container">
    <section aria-labelledby="contact-h2">
      <h2 id="contact-h2" class="visually-hidden">Contact form</h2>

      <form id="contactForm" class="card" method="post" action="#" novalidate>
        <div id="form-status" class="card" hidden aria-live="polite"></div>

        <div class="form-group">
          <label for="name">Your Name</label>
          <input id="name" name="name" type="text" autocomplete="name" required>
        </div>

        <div class="form-group">
          <label for="email">Your Email</label>
          <input id="email" name="email" type="email" autocomplete="email" required>
        </div>

        <div class="form-group">
          <label for="reason">Contact Reason</label>
          <select id="reason" name="reason" required>
            <option value="" disabled selected>Select an option</option>
            <option value="general">General Inquiry</option>
            <option value="error">Report an Error</option>
            <option value="technical">Website Issue</option>
            <option value="career">Career Opportunity</option>
          </select>
        </div>

        <div class="form-group">
          <label for="message">Message</label>
          <textarea id="message" name="message" rows="6" minlength="10" required></textarea>
        </div>

        <div class="controls">
          <button type="submit" class="btn">Send Message</button>
        </div>

        <p class="muted" style="margin-top:.5rem">
          This is an unofficial, student-built site for WDD 131. For official park information, visit the
          <a href="https://www.nps.gov/yose" target="_blank" rel="noopener">Yosemite National Park website</a>.
        </p>
      </form>
    </section>
  </main>

  <!-- ===== FOOTER ===== -->
  <footer class="site-footer">
    <p>¬© 2025 Yosemite Road Trip Guide ‚Ä¢ <a href="references.html">References</a></p>
    <p><small>Last updated: <time id="last-updated" datetime=""></time></small></p>
  </footer>

  <!-- Shared site script (menu, theme, etc.) -->
  <script src="scripts/main.js" defer></script>
  <!-- Last updated script -->
  <script src="scripts/last-updated.js" defer></script>

  <!-- Page-specific: lightweight submit handling -->
  <script>
    (function(){
      const form = document.getElementById('contactForm');
      const status = document.getElementById('form-status');

      // Prefill name from previous submission (nice touch)
      try {
        const cached = JSON.parse(localStorage.getItem('lastContact') || 'null');
        if (cached?.name) document.getElementById('name').value = cached.name;
      } catch(_) {}

      form.addEventListener('submit', function(e){
        e.preventDefault();

        const name = document.getElementById('name').value.trim();
        const email = document.getElementById('email').value.trim();
        const reason = document.getElementById('reason').value;
        const message = document.getElementById('message').value.trim();

        // Simple validation (more robust checks can live in scripts/main.js)
        const problems = [];
        if (name.length < 2) problems.push('Please enter your name (2+ characters).');
        if (!/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(email)) problems.push('Please enter a valid email address.');
        if (!reason) problems.push('Please choose a contact reason.');
        if (message.length < 10) problems.push('Your message should be at least 10 characters.');

        if (problems.length) {
          status.hidden = false;
          status.innerHTML = '<ul>' + problems.map(p => `<li>${p}</li>`).join('') + '</ul>';
          status.focus?.();
          return;
        }

        // Save a lightweight record locally
        localStorage.setItem('lastContact', JSON.stringify({ name, email, reason, when: new Date().toISOString() }));

        // Friendly thank-you using template literals
        status.hidden = false;
        status.innerHTML = `<p>Thanks, <strong>${name}</strong> ‚Äî your ‚Äú${document.querySelector('#reason option:checked').textContent}‚Äù message was received.</p>`;

        form.reset();
        document.getElementById('name').focus();
      });
    })();
  </script>
</body>
</html>
